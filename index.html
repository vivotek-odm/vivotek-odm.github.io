<!doctype html>
<html lang="zh-Hant" data-theme="minimal">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Web Serial 控制台</title>
    <meta name="description" content="靜態版 Web Serial UART 工具，提供連線、指令與日誌管理功能。" />
    <link rel="stylesheet" href="assets/style.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/xterm@5.3.0/css/xterm.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;600&family=IBM+Plex+Mono:wght@400;500&family=IBM+Plex+Sans:wght@400;600&family=Inter:wght@400;600;700&family=Manrope:wght@400;600;700&family=Nunito:wght@400;600;700&family=Nunito+Sans:wght@400;600&family=Patrick+Hand&family=Poppins:wght@400;600&family=Press+Start+2P&family=Roboto+Mono:wght@400;500&family=Rubik:wght@400;600&family=Source+Serif+4:wght@400;600&family=Space+Grotesk:wght@400;600&family=Sora:wght@400;600&display=swap" rel="stylesheet">
  </head>
  <body>
    <header class="banner">
      <div class="inner">
        <h1>Web Serial</h1>
        <div class="theme-switch">
          <div class="theme-switch__row">
            <label for="themeSelect" data-i18n="themeLabel">主題</label>
          <select id="themeSelect">
            <option value="neo-glass" data-i18n="themeNeoGlass">Neo-Glass</option>
            <option value="mono-pro" data-i18n="themeMonoPro">Mono Pro</option>
            <option value="solar-fresh" data-i18n="themeSolarFresh">Solar Fresh</option>
            <option value="nature-calm" data-i18n="themeNatureCalm">Nature Calm</option>
            <option value="dark-operator" data-i18n="themeDarkOperator">Dark Operator</option>
            <option value="retro-pixel" data-i18n="themeRetroPixel">Retro Pixel</option>
            <option value="editorial-serif" data-i18n="themeEditorialSerif">Editorial Serif</option>
            <option value="cyber-grid" data-i18n="themeCyberGrid">Cyber Grid</option>
            <option value="warm-craft" data-i18n="themeWarmCraft">Warm Craft</option>
            <option value="data-dense" data-i18n="themeDataDense">Data Dense</option>
            <option value="playful-pastel" data-i18n="themePlayfulPastel">Playful Pastel</option>
            <option value="luxury-noir" data-i18n="themeLuxuryNoir">Luxury Noir</option>
            <option value="minimal" selected data-i18n="themeMinimal">極簡白</option>
            <option value="blue" data-i18n="themeBlue">科技藍</option>
            <option value="purple" data-i18n="themePurple">科技紫</option>
            <option value="green" data-i18n="themeGreen">科技綠</option>
            <option value="neon" data-i18n="themeNeon">暗夜紫/霓虹</option>
          </select>
        </div>
          <div class="theme-switch__row">
            <label for="langSelect" data-i18n="languageLabel">語言</label>
            <select id="langSelect">
              <option value="zh" data-i18n="langChinese">中文</option>
              <option value="en" data-i18n="langEnglish">English</option>
            </select>
          </div>
        </div>
      </div>
    </header>

    <main class="layout">
      <aside class="left-col">
        <section class="hw-editor reveal" id="commandPanel">
          <div class="hw-editor__header">
            <h2 data-i18n="commandTitle">Command</h2>
            <button id="btnCommandToggle" type="button" class="ghost-btn ghost-btn--icon" data-i18n-expanded="commandCollapse" data-i18n-collapsed="commandExpand" aria-expanded="true" title="收合" aria-label="收合"></button>
          </div>
          <div class="hw-editor__body" id="commandBody">
            <div class="hw-editor__group" data-group="source">
              <div class="hw-editor__title">
                <span data-i18n="commandSourceTitle">指令來源</span>
                <button class="group-toggle" type="button" data-target="source" aria-expanded="true" title="收合"></button>
              </div>
              <p class="hw-editor__hint" data-i18n="commandSourceHint">可上傳新的 Markdown 指令或套用已儲存的檔案。</p>
              <div class="hw-editor__inner" data-wrapper="source">
              <div class="row upload-row">
                <label for="hwUpload" data-i18n="uploadLabel">上傳指令</label>
                <input id="hwUpload" type="file" accept=".md,.markdown,.txt" />
                <button id="btnClearUpload" type="button" data-i18n="clearUpload">清除</button>
              </div>
              <div class="row upload-row">
                <label for="savedUploadSelect" data-i18n="savedUploadsLabel">已上傳指令</label>
                <select id="savedUploadSelect">
                  <option value="" data-i18n="savedUploadsPlaceholder">選擇已上傳檔案</option>
                </select>
              </div>
              <p class="upload-status" id="uploadStatus" data-i18n="uploadHint">支援 Markdown 檔，上傳後會轉成硬體動作按鈕。</p>
              </div>
            </div>

            <div class="hw-editor__group" data-group="editor">
              <div class="hw-editor__title">
                <span data-i18n="commandEditorTitle">指令編輯</span>
                <button class="group-toggle" type="button" data-target="editor" aria-expanded="true" title="收合"></button>
              </div>
              <p class="hw-editor__hint" data-i18n="commandEditorHint">可先調整內容，按送出後依照行結尾設定傳送。</p>
              <div class="hw-editor__inner" data-wrapper="editor">
              <textarea id="codeArea" spellcheck="false" placeholder="按下面動作按鈕會載入該段指令並立即送出..." data-i18n-placeholder="codePlaceholder"></textarea>
              <div class="hw-editor__actions">
                <button id="btnRunCode" class="btn-primary" disabled data-i18n="runCode">執行/送出 Command</button>
              </div>
              </div>
            </div>
          </div>
        </section>

        <section class="hw-ctrl reveal">
          <h2 data-i18n="hwCommandsTitle">硬體測試指令</h2>
          <div class="hw-list" id="hwList" aria-label="硬體清單與動作按鈕" data-i18n-aria="hwListAria"></div>
        </section>
      </aside>

      <section class="right-col">
        <section class="controls reveal">
          <div class="row">
            <button id="btnConnect" class="btn-primary" data-i18n="connect">連線</button>
            <button id="btnDisconnect" disabled data-i18n="disconnect">中斷</button>
            <label><span data-i18n="labelBaud">Baud:</span>
              <input id="baudRate" type="number" value="115200" min="1200" step="1">
            </label>
            <label><span data-i18n="labelDtr">DTR:</span> <input id="dtr" type="checkbox" checked></label>
            <label><span data-i18n="labelRts">RTS:</span> <input id="rts" type="checkbox"></label>
          </div>
          <div class="row">
            <input id="tx" type="text" placeholder="輸入要傳送的指令，例如: AT" data-i18n-placeholder="inputPlaceholder" />
            <select id="lineEnding">
              <option value="none" data-i18n="lineEndingNone">無結尾</option>
              <option value="lf" data-i18n="lineEndingLF">\n</option>
              <option value="cr" data-i18n="lineEndingCR">\r</option>
              <option value="crlf" selected data-i18n="lineEndingCRLF">\r\n</option>
            </select>
            <button id="btnSend" class="btn-primary" disabled data-i18n="send">送出</button>
          </div>
          <div class="row small">
            <label><input type="checkbox" id="hexMode"><span data-i18n="hexMode"> HEX 顯示</span></label>
            <button id="btnClear" data-i18n="clear">清除</button>
            <button id="btnSave" data-i18n="save">儲存 Log</button>
            <input id="logTag" type="text" value="session" title="log 檔名標籤" data-i18n-title="logTagTitle">
            <button id="btnDownload" data-i18n="download">下載</button>
          </div>
        </section>

        <section class="term reveal">
          <div id="terminal" role="region" aria-label="Terminal" tabindex="0"></div>
          <pre id="rx" aria-live="polite" hidden></pre>
        </section>
      </section>
    </main>

    <footer>
      <small>
        <span data-i18n="footerTextPrefix">版權所有 © 2019-</span><span id="copyrightYear"></span><span data-i18n="footerTextSuffix"> Vivotek ODM BU</span>
      </small>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/xterm@5.3.0/lib/xterm.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/xterm-addon-fit@0.8.0/lib/xterm-addon-fit.min.js"></script>
    <script src="assets/data.js"></script>
    <script src="assets/main.js"></script>
  </body>
</html>
